{#
#
# (c) Copyright 2017 SUSE LLC
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
#}

// This file has been generated by ansible from
// bind/templates/named.conf.j2
// It contains the Ardana OpenStack values that apply only to the
// bind service. You may make changes to this file by adding
// sections below.


options {
       directory "{{ bind_zone_file_dir | quote }}";

       allow-new-zones yes;
       dnssec-validation auto;
       auth-nxdomain no;
       recursion no;
       minimal-responses yes;

       listen-on port {{ bind_internal_port }} { {{ bind_internal_host }}; };
       listen-on port {{ bind_public_port }} { {{ bind_public_host }}; };

       allow-notify { {{ bind_allow_notify }} };
};

key "rndc-key" {
       algorithm hmac-md5;
       secret "{{ bind_rndc_key }}";
};

controls {
       inet {{ bind_rndc_host }} port {{ bind_rndc_port }} allow { {{ bind_rndc_allow }}; } keys { "rndc-key"; };
};

logging {
       channel update_debug {
               file "{{ bind_logging_dir }}/updates.log" versions 10 size 10M;
               severity dynamic;
               print-severity  yes;
               print-time              yes;
       };
       channel security_info {
               file "{{ bind_logging_dir }}/security.log" versions 10 size 10M;
               severity dynamic;
               print-severity  yes;
               print-time              yes;
       };
       channel default_log {
               file "{{ bind_logging_dir }}/general.log" versions 10 size 10M;
               severity dynamic;
               print-category  yes;
               print-severity  yes;
               print-time              yes;
       };

       category default { default_log; };
       category update { update_debug; };
       category update-security { update_debug; };
       category security { security_info; };
};
